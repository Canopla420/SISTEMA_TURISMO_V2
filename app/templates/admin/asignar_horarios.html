{% extends "base.html" %}

{% block title %}Asignar Horarios - Admin{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>â° Asignar Horarios</h1>
    <a href="/admin/solicitudes" class="btn btn-secondary">â† Volver a Solicitudes</a>
</div>

<!-- InformaciÃ³n de la Solicitud -->
<div class="card mb-4">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">ğŸ“‹ Solicitud #001 - Escuela Juan XXIII</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>ğŸ“… Fecha solicitada:</strong> 15/11/2025</p>
                <p><strong>ğŸ‘¥ Cantidad de alumnos:</strong> 25</p>
                <p><strong>ğŸ“ Localidad:</strong> Esperanza</p>
                <p><strong>ğŸ¯ Nivel:</strong> Primaria (6 aÃ±os)</p>
            </div>
            <div class="col-md-6">
                <p><strong>ğŸ“ Contacto:</strong> Ana LÃ³pez</p>
                <p><strong>â˜ï¸ TelÃ©fono:</strong> 03496-123456</p>
                <p><strong>â° Horario preferido:</strong> MaÃ±ana</p>
                <p><strong>ğŸ“ Observaciones:</strong> Grupo muy activo</p>
            </div>
        </div>
    </div>
</div>

<!-- Formulario de AsignaciÃ³n de Horarios -->
<form id="asignar-horarios-form">
    <div class="card mb-4">
        <div class="card-header bg-warning text-dark">
            <h5 class="mb-0">ğŸ›ï¸ Prestadores Solicitados - Coordinar Horarios</h5>
        </div>
        <div class="card-body">
            
            <!-- Prestador 1: Museo -->
            <div class="row mb-4 p-3 border rounded bg-light">
                <div class="col-md-4">
                    <h6 class="text-primary">ğŸ›ï¸ Museo de la ColonizaciÃ³n</h6>
                    <p class="small text-muted mb-0">Capacidad: 50 personas</p>
                    <p class="small text-muted">DuraciÃ³n tÃ­pica: 1 hora</p>
                </div>
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-3">
                            <label class="form-label">Hora inicio:</label>
                            <input type="time" class="form-control" name="museo_inicio" value="10:00">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Hora fin:</label>
                            <input type="time" class="form-control" name="museo_fin" value="11:00">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">Grupo:</label>
                            <select class="form-select" name="museo_grupo">
                                <option value="1">Grupo 1</option>
                                <option value="2">Grupo 2</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Observaciones:</label>
                            <input type="text" class="form-control" name="museo_obs" placeholder="Ej: Usar entrada principal">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prestador 2: Sala de Miel -->
            <div class="row mb-4 p-3 border rounded bg-light">
                <div class="col-md-4">
                    <h6 class="text-primary">ğŸ¯ Sala de extracciÃ³n de Miel</h6>
                    <p class="small text-muted mb-0">Capacidad: 30 personas</p>
                    <p class="small text-muted">DuraciÃ³n tÃ­pica: 45 min</p>
                </div>
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-3">
                            <label class="form-label">Hora inicio:</label>
                            <input type="time" class="form-control" name="miel_inicio" value="11:30">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Hora fin:</label>
                            <input type="time" class="form-control" name="miel_fin" value="12:15">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">Grupo:</label>
                            <select class="form-select" name="miel_grupo">
                                <option value="1">Grupo 1</option>
                                <option value="2">Grupo 2</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Observaciones:</label>
                            <input type="text" class="form-control" name="miel_obs" placeholder="Ej: Traer delantales">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prestador 3: Bomberos -->
            <div class="row mb-4 p-3 border rounded bg-light">
                <div class="col-md-4">
                    <h6 class="text-primary">ğŸš’ Cuartel de bomberos Voluntarios</h6>
                    <p class="small text-muted mb-0">Capacidad: 40 personas</p>
                    <p class="small text-muted">DuraciÃ³n tÃ­pica: 1 hora</p>
                </div>
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-3">
                            <label class="form-label">Hora inicio:</label>
                            <input type="time" class="form-control" name="bomberos_inicio" value="14:00">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Hora fin:</label>
                            <input type="time" class="form-control" name="bomberos_fin" value="15:00">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">Grupo:</label>
                            <select class="form-select" name="bomberos_grupo">
                                <option value="1">Grupo 1</option>
                                <option value="2">Grupo 2</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Observaciones:</label>
                            <input type="text" class="form-control" name="bomberos_obs" placeholder="Ej: Ver camiones">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Resumen y Acciones -->
    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0">ğŸ“‹ Resumen del Itinerario</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-8">
                    <h6>ğŸ—“ï¸ Itinerario coordinado para el 15/11/2025:</h6>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <strong>10:00 - 11:00</strong> â†’ ğŸ›ï¸ Museo de la ColonizaciÃ³n (Grupo 1)
                        </li>
                        <li class="list-group-item">
                            <strong>11:30 - 12:15</strong> â†’ ğŸ¯ Sala de extracciÃ³n de Miel (Grupo 1)
                        </li>
                        <li class="list-group-item">
                            <strong>14:00 - 15:00</strong> â†’ ğŸš’ Cuartel de bomberos Voluntarios (Grupo 1)
                        </li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h6>ğŸ“Š InformaciÃ³n del grupo:</h6>
                    <p><strong>Total:</strong> 25 alumnos + 3 docentes</p>
                    <p><strong>DuraciÃ³n total:</strong> 5 horas</p>
                    <p><strong>Tiempo libre:</strong> 12:15 - 14:00 (1h45m)</p>
                    <div class="alert alert-info small">
                        ğŸ’¡ <strong>Sugerencia:</strong> Tiempo libre ideal para almorzar
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Botones de AcciÃ³n -->
    <div class="d-flex gap-3 justify-content-end">
        <a href="/admin/solicitudes" class="btn btn-secondary">âŒ Cancelar</a>
        <button type="button" class="btn btn-warning" onclick="guardarBorrador()">ğŸ’¾ Guardar Borrador</button>
        <button type="submit" class="btn btn-success btn-lg">âœ… Confirmar y Crear Visitas</button>
    </div>
</form>

<script>
function guardarBorrador() {
    alert('Borrador guardado. Puede continuar coordinando mÃ¡s tarde.');
}

document.getElementById('asignar-horarios-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    if (confirm('Â¿Confirmar horarios y crear las visitas para los prestadores?')) {
        // AquÃ­ irÃ­a la lÃ³gica para enviar los datos al backend
        alert('Â¡Visita confirmada! Se han creado las asignaciones para cada prestador.');
        window.location.href = '/admin/solicitudes';
    }
});
</script>
{% endblock %}